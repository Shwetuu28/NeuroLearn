<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NeuroLearn â€” Sign In</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-100 min-h-screen flex flex-col">
    <!-- Navbar -->
    <header class="bg-indigo-600 shadow-lg sticky top-0 z-50 border-b-4">
      <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
        <h1 class="text-xl font-bold text-white">ðŸ§  NeuroLearn</h1>
        <nav class="space-x-6">
          <a href="index.html" class="text-white font-semibold hover:underline">Home</a>
          <a href="index.html#about" class="text-white font-semibold hover:underline">About</a>
          <a href="ai.html" class="text-white font-semibold hover:underline">AI Tutor</a>
          <a href="dashboard.html" class="text-white font-semibold hover:underline">Dashboard</a>
        </nav>
      </div>
    </header>

    <!-- Auth Section -->
    <main class="flex-grow flex items-center justify-center px-4 py-10">
      <div class="bg-white rounded-xl shadow-lg w-full max-w-lg p-8">
        <h2 class="text-2xl font-bold text-center mb-6 text-indigo-600">Welcome back to NeuroLearn</h2>

        <!-- Accessible tab list -->
        <div role="tablist" aria-label="Authentication tabs" class="flex justify-center mb-6">
          <button id="tab-login" role="tab" aria-selected="true" aria-controls="panel-login" class="px-4 py-2 border-b-2 border-indigo-600 font-semibold focus:outline-none">Login</button>
          <button id="tab-signup" role="tab" aria-selected="false" aria-controls="panel-signup" class="px-4 py-2 text-gray-500 font-semibold focus:outline-none">Sign Up</button>
        </div>

        <!-- Forms container -->
        <div>
          <!-- Login Panel -->
          <section id="panel-login" role="tabpanel" aria-labelledby="tab-login">
            <form id="loginForm" class="space-y-4" novalidate>
              <div>
                <label for="loginEmail" class="block mb-1 font-medium">Email</label>
                <input type="email" id="loginEmail" name="email" required autocomplete="email" placeholder="name@domain.com" class="w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-indigo-400" />
              </div>
              <div>
                <label for="loginPassword" class="block mb-1 font-medium">Password</label>
                <input type="password" id="loginPassword" name="password" required minlength="6" autocomplete="current-password" placeholder="Your password" class="w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-indigo-400" />
              </div>

              <div class="flex items-center justify-between text-sm">
                <label class="inline-flex items-center">
                  <input type="checkbox" id="remember" class="mr-2" />
                  Remember me
                </label>
                <button type="button" id="forgotBtn" class="text-indigo-600 hover:underline">Forgot?</button>
              </div>

              <div>
                <button type="submit" id="loginBtn" class="w-full bg-indigo-500 text-white py-2 rounded hover:bg-indigo-600 transition">Sign in</button>
              </div>

              <p id="loginMsg" class="mt-2 text-center text-sm text-red-500" aria-live="polite"></p>
            </form>

            <div class="mt-4 text-center text-sm text-gray-600">
              Or <button id="show-magic" class="text-indigo-600 hover:underline">send a magic link</button>
            </div>
          </section>

          <!-- Signup Panel -->
          <section id="panel-signup" role="tabpanel" aria-labelledby="tab-signup" class="hidden">
            <form id="signupForm" class="space-y-4" novalidate>
              <div>
                <label for="signupName" class="block mb-1 font-medium">Name</label>
                <input type="text" id="signupName" name="name" placeholder="Full name" autocomplete="name" class="w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-green-400" />
              </div>
              <div>
                <label for="signupEmail" class="block mb-1 font-medium">Email</label>
                <input type="email" id="signupEmail" name="email" required autocomplete="email" placeholder="name@domain.com" class="w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-green-400" />
              </div>
              <div>
                <label for="signupPassword" class="block mb-1 font-medium">Password</label>
                <input type="password" id="signupPassword" name="password" required minlength="6" autocomplete="new-password" placeholder="Create a password" class="w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-green-400" />
              </div>
              <div>
                <button type="submit" class="w-full bg-indigo-500 text-white py-2 rounded hover:bg-indigo-600 transition">Create account</button>
              </div>
              <p id="signupMsg" class="mt-2 text-center text-sm text-red-500" aria-live="polite"></p>
            </form>
          </section>

          <!-- Magic Link Panel -->
          <section id="panel-magic" role="region" aria-label="Magic link" class="hidden mt-4">
            <form id="magicForm" class="space-y-4" novalidate>
              <div>
                <label for="magicEmail" class="block mb-1 font-medium">Email</label>
                <input type="email" id="magicEmail" name="email" required placeholder="name@domain.com" class="w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-indigo-400" />
              </div>
              <div>
                <button type="submit" class="w-full bg-indigo-500 text-white py-2 rounded hover:bg-indigo-600 transition">Send magic link</button>
              </div>
              <p id="magicMsg" class="mt-2 text-center text-sm text-green-500" aria-live="polite"></p>
              <div class="mt-2 text-center text-sm"><button id="back-to-login" class="text-indigo-600 hover:underline">Back to login</button></div>
            </form>
          </section>

          <!-- Forgot Panel -->
          <section id="panel-forgot" role="region" aria-label="Forgot password" class="hidden mt-4">
            <form id="forgotForm" class="space-y-4" novalidate>
              <div>
                <label for="forgotEmail" class="block mb-1 font-medium">Email</label>
                <input type="email" id="forgotEmail" name="email" required placeholder="name@domain.com" class="w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-red-400" />
              </div>
              <div>
                <button type="submit" class="w-full bg-red-500 text-white py-2 rounded hover:bg-red-600 transition">Send reset link</button>
              </div>
              <p id="forgotMsg" class="mt-2 text-center text-sm text-green-500" aria-live="polite"></p>
              <div class="mt-2 text-center text-sm"><button id="back-to-login-2" class="text-indigo-600 hover:underline">Back to login</button></div>
            </form>
          </section>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="bg-indigo-600 text-white text-center py-6 mt-10">
      <p class="text-sm">&copy; 2025 NeuroLearn. All rights reserved.</p>
    </footer>

    <!-- Script: improved behavior + redirect to dashboard.html on success -->
    <script>
      // Tabs & panels
      const tabLogin = document.getElementById('tab-login');
      const tabSignup = document.getElementById('tab-signup');
      const panelLogin = document.getElementById('panel-login');
      const panelSignup = document.getElementById('panel-signup');
      const panelMagic = document.getElementById('panel-magic');
      const panelForgot = document.getElementById('panel-forgot');

      function showPanel(panelKey) {
        // hide all
        [panelLogin, panelSignup, panelMagic, panelForgot].forEach(p => p.classList.add('hidden'));
        // reset tab aria
        tabLogin.setAttribute('aria-selected', 'false');
        tabSignup.setAttribute('aria-selected', 'false');

        if (panelKey === 'login') {
          panelLogin.classList.remove('hidden');
          tabLogin.setAttribute('aria-selected', 'true');
        } else if (panelKey === 'signup') {
          panelSignup.classList.remove('hidden');
          tabSignup.setAttribute('aria-selected', 'true');
        } else if (panelKey === 'magic') {
          panelMagic.classList.remove('hidden');
        } else if (panelKey === 'forgot') {
          panelForgot.classList.remove('hidden');
        }
        // focus first input for accessibility
        const firstInput = document.querySelector('#' + (panelKey === 'signup' ? 'signupForm' : panelKey === 'magic' ? 'magicForm' : panelKey === 'forgot' ? 'forgotForm' : 'loginForm') + ' input');
        if (firstInput) firstInput.focus();
      }

      tabLogin.addEventListener('click', () => showPanel('login'));
      tabSignup.addEventListener('click', () => showPanel('signup'));

      // link buttons
      document.getElementById('show-magic').addEventListener('click', () => showPanel('magic'));
      document.getElementById('forgotBtn').addEventListener('click', () => showPanel('forgot'));
      document.getElementById('back-to-login').addEventListener('click', (e) => { e.preventDefault(); showPanel('login'); });
      document.getElementById('back-to-login-2').addEventListener('click', (e) => { e.preventDefault(); showPanel('login'); });

      // Generic helper to simulate success and redirect
      function succeedAndRedirect(messageEl, messageText, redirectTo = 'dashboard.html') {
        messageEl.textContent = messageText;
        // small visual pause so user sees message, then redirect
        setTimeout(() => {
          // real app: replace with server-side auth + real token handling
          window.location.href = redirectTo;
        }, 700);
      }

      // Login handling
      document.getElementById('loginForm').addEventListener('submit', (e) => {
        e.preventDefault();
        const email = document.getElementById('loginEmail').value.trim();
        const password = document.getElementById('loginPassword').value;
        const msg = document.getElementById('loginMsg');
        msg.textContent = '';

        // basic validation
        if (!email || !email.includes('@') || password.length < 6) {
          msg.textContent = 'Please provide a valid email and a password with at least 6 characters.';
          return;
        }

        // Simulate authenticate (replace with real API call)
        const btn = document.getElementById('loginBtn');
        btn.disabled = true;
        btn.textContent = 'Signing in...';

        setTimeout(() => {
          btn.disabled = false;
          btn.textContent = 'Sign in';
          // on success redirect to dashboard.html
          succeedAndRedirect(msg, 'Sign in successful! Redirecting...');
        }, 800);
      });

      // Signup handling
      document.getElementById('signupForm').addEventListener('submit', (e) => {
        e.preventDefault();
        const email = document.getElementById('signupEmail').value.trim();
        const password = document.getElementById('signupPassword').value;
        const msg = document.getElementById('signupMsg');
        msg.textContent = '';

        if (!email || !email.includes('@') || password.length < 6) {
          msg.textContent = 'Please provide a valid email and a password with at least 6 characters.';
          return;
        }

        // Simulate account creation
        msg.textContent = 'Account created â€” signing in...';
        setTimeout(() => {
          // after creation, redirect to dashboard
          window.location.href = 'dashboard.html';
        }, 900);
      });

      // Magic link handling
      document.getElementById('magicForm').addEventListener('submit', (e) => {
        e.preventDefault();
        const email = document.getElementById('magicEmail').value.trim();
        const msg = document.getElementById('magicMsg');
        msg.textContent = '';
        if (!email || !email.includes('@')) {
          msg.textContent = 'Enter a valid email.';
          return;
        }
        // In real app: call API to send magic link
        msg.textContent = 'Magic link sent â€” check your inbox.';
      });

      // Forgot handling
      document.getElementById('forgotForm').addEventListener('submit', (e) => {
        e.preventDefault();
        const email = document.getElementById('forgotEmail').value.trim();
        const msg = document.getElementById('forgotMsg');
        msg.textContent = '';
        if (!email || !email.includes('@')) {
          msg.textContent = 'Enter a valid email.';
          return;
        }
        // In real app: call API to send reset link
        msg.textContent = 'Reset link sent. Check your email.';
      });

      // init
      showPanel('login');
    </script>
  </body>
</html>